"use strict";var solution,gameOver=!1,target_wordsUrl="target_words.json";function fetchTargetWords(){return fetch(target_wordsUrl).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).catch((function(e){return console.error("Error fetching target_words:",e),null}))}function getRandomWord(e){var t=Object.keys(e);return e[t[Math.floor(Math.random()*t.length)]]}fetchTargetWords().then((function(e){e&&(solution=getRandomWord(e),console.log(solution))}));var dictionary,dictionaryUrl="dictionary.json";function fetchDictionary(){return fetch(dictionaryUrl).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).catch((function(e){return console.error("Error fetching target_words:",e),null}))}function isWordInDictionary(e,t){return t.includes(e)}fetchDictionary().then((function(e){e&&(dictionary=e,console.log("Dictionary fetched successfully"))}));var lettersPattern=/^[a-zA-Z]$/,currentGuessCount=1,currentGuess=document.querySelector("#guess"+currentGuessCount),currentLetters=currentGuess.dataset.letters;function startInteraction(){document.querySelectorAll(".key").forEach((function(e){e.addEventListener("click",handleMouseClick)})),document.addEventListener("keydown",handleKeyPress)}function handleMouseClick(e){console.log("click");var t=e.target;if(t.classList.contains("key")){var r=t.dataset.key;if(t.classList.add("marked"),gameOver)return;if(1==r.length&&lettersPattern.test(r))updateLetters(r);else if("Backspace"===r)console.log("backspace"),deleteFromLetters();else if("Enter"===r&&5==currentGuess.dataset.letters.length&&currentGuessCount<=6){var s=currentGuess.dataset.letters;if(isWordInDictionary(s=s.toLowerCase(),dictionary)){for(var n=currentGuessCount,o=[],i=0;i<5;i++)o.push(revealTile(i,checkLetter(i,n)));matchedPositions=[];var c=currentGuess;Promise.all(o).then((function(){return s===solution?(winTiles(c),void(gameOver=!0)):currentGuessCount>6?(alert("You lose! The correct word was "+solution),void(gameOver=!0)):void 0})),currentGuess.dataset.completed="true",gameOver||(currentGuessCount++,currentGuess=document.querySelector("#guess"+currentGuessCount))}else errorTiles(currentGuess)}t.blur()}}function handleKeyPress(e){var t=document.querySelector('.key[data-key="'.concat(e.key,'"]'));if(t&&t.classList.add("marked"),!gameOver){var r=e.key;if(1==r.length&&lettersPattern.test(r))updateLetters(r);else if("Backspace"===e.key)deleteFromLetters(e.key);else if("Enter"===e.key&&5==currentGuess.dataset.letters.length&&currentGuessCount<=6){var s=currentGuess.dataset.letters;if(isWordInDictionary(s,dictionary)){console.log("enter");for(var n=currentGuessCount,o=[],i=0;i<5;i++)o.push(revealTile(i,checkLetter(i,n)));matchedPositions=[];var c=currentGuess;Promise.all(o).then((function(){return s===solution?(winTiles(c),void(gameOver=!0)):currentGuessCount>6?(alert("You lose! The correct word was "+solution),void(gameOver=!0)):void 0})),currentGuess.dataset.completed="true",gameOver||(currentGuessCount++,currentGuess=document.querySelector("#guess"+currentGuessCount))}else errorTiles(currentGuess)}}}var isWinAnimationRunning=!1,flipTimeout=null,winTiles=function(e){clearTimeout(flipTimeout),gameOver=!0;var t=e.id.replace("guess",""),r=Array.from({length:5},(function(e,r){return document.querySelector("#guess"+t+"Tile"+(r+1))})),s=0,n=setInterval((function(){if(s<r.length){var e=r[s];e&&(e.classList.add("win"),setTimeout((function(){e.classList.remove("win")}),2e3)),s++}else clearInterval(n),isWinAnimationRunning=!1}),100)},errorTiles=function(e){var t=document.querySelector(".not_in_the_list");null!==t&&(t.classList.remove("not_in_the_list"),t.classList.add("not_in_the_list--visible"),e.classList.add("jiggle"),setTimeout((function(){t.classList.remove("not_in_the_list--visible"),t.classList.add("not_in_the_list"),e.classList.remove("jiggle")}),2e3))},updateLetters=function(e){if(!currentGuess.dataset.completed){var t=currentGuess.dataset.letters;if(t.length<5){var r=t+e;currentGuess.dataset.letters=r,updateTiles(t.length+1,e)}}},updateTiles=function(e,t){var r=document.querySelector("#guess"+currentGuessCount+"Tile"+e);r&&(r.textContent=t)},deleteFromLetters=function(){if(!currentGuess.dataset.completed&&!gameOver){var e=currentGuess.dataset.letters;if(e.length>0){var t=e.slice(0,-1);deletefromTiles(e.length),currentGuess.dataset.letters=t}}},deletefromTiles=function(e){(console.log("tileNumber: "+e),currentGuess.dataset.completed)||(document.querySelector("#guess"+currentGuessCount+"Tile"+e).textContent="");var t=document.querySelector("#guess"+currentGuessCount+"Tile"+e);t.dataset.letter="",t.innerText=""},matchedPositions=[],correctlyGuessedLetters=new Array(5).fill(null),checkLetter=function(e,t){var r=currentGuess.dataset.letters,s=r.charAt(e),n=solution.charAt(e),o=r.charAt(e);o=s.toUpperCase();var i=document.querySelector('.key[data-key="'.concat(o,'"]'));s===n?(correctlyGuessedLetters[e]=s,setTimeout((function(){revealTile(e,"correct",t),i.classList.contains("present")?(i.classList.remove("present"),i.classList.add("correct")):i.classList.add("correct"),t++}),150*e)):solution.includes(s)&&correctlyGuessedLetters[e]!==s&&r.charAt(e)!==solution.charAt(e)?setTimeout((function(){revealTile(e,"present",t),i.classList.add("present"),t++}),150*e):setTimeout((function(){revealTile(e,"absent",t),i.classList.add("absent"),t++}),150*e)},revealTile=function(e,t,r){return new Promise((function(s){var n=e+1,o="#guess"+r+"Tile"+n;document.querySelector(o);gameOver||flipTile(n,t,r),setTimeout(s,1500)}))},flipTile=function(e,t,r){var s="#guess"+r+"Tile"+e,n=document.querySelector(s);n&&!isWinAnimationRunning&&(n.classList.add("flip-in"),flipTimeout=setTimeout((function(){if(!isWinAnimationRunning){n.classList.remove("flip-in"),n.classList.add("flip-out"),n.classList.add(t);var e=n.textContent.toLowerCase(),r=document.querySelector('.key[data-key="'.concat(e,'"]'));switch(r&&r.classList.add(t),t){case"correct":n.classList.add("correct");break;case"present":n.classList.add("present");break;case"absent":n.classList.add("absent")}}}),500))};startInteraction();
//# sourceMappingURL=script.js.map